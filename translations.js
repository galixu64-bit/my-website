
const translations = {
    zh: {

        'login': 'ÁôªÂΩï',
        'logout': 'ÁôªÂá∫',
        'register': 'Ê≥®ÂÜå',
        'cancel': 'ÂèñÊ∂à',
        'submit': 'Êèê‰∫§',
        'save': '‰øùÂ≠ò',
        'delete': 'Âà†Èô§',
        'edit': 'ÁºñËæë',
        'back': 'ËøîÂõû',
        'search': 'ÊêúÁ¥¢',
        'filter': 'Á≠õÈÄâ',
        'reset': 'ÈáçÁΩÆ',
        'confirm': 'Á°ÆËÆ§',
        'close': 'ÂÖ≥Èó≠',
        'loading': 'Âä†ËΩΩ‰∏≠...',
        'error': 'ÈîôËØØ',
        'success': 'ÊàêÂäü',

        'siteName': 'dragbit',
        'siteDescription': '‰ºòË¥®ËµÑÊ∫êÔºåÂÖçË¥π‰∏ãËΩΩ',
        'home': 'È¶ñÈ°µ',
        'myResources': 'ÊàëÁöÑËµÑÊ∫ê',
        'addResource': 'Ê∑ªÂä†ËµÑÊ∫ê',
        'profile': '‰∏™‰∫∫‰∏≠ÂøÉ',
        'personalCenter': '‰∏™‰∫∫‰∏≠ÂøÉ',
        'loginRequired': 'ÈúÄË¶ÅÁôªÂΩï',
        'loginRequiredMessage': 'ÊÇ®ÈúÄË¶ÅÁôªÂΩïÊâçËÉΩÊü•ÁúãËµÑÊ∫ê\nËØ∑ÁôªÂΩïÊàñÊ≥®ÂÜå',

        'resources': 'ËµÑÊ∫ê',
        'allCategories': 'ÂÖ®ÈÉ®',
        'filterAll': 'ÂÖ®ÈÉ®',
        'filterSoftware': 'ËΩØ‰ª∂',
        'filterDocument': 'ÊñáÊ°£',
        'filterMedia': 'Â™í‰Ωì',
        'filterWebsite': 'ÁΩëÁ´ô',
        'filterOther': 'ÂÖ∂‰ªñ',
        'software': 'ËΩØ‰ª∂',
        'document': 'ÊñáÊ°£',
        'media': 'Â™í‰Ωì',
        'website': 'ÁΩëÁ´ô',
        'other': 'ÂÖ∂‰ªñ',
        'searchPlaceholder': 'ÊêúÁ¥¢ËµÑÊ∫ê...',
        'addResourceButton': '+ Ê∑ªÂä†ËµÑÊ∫ê',
        'visitWebsite': 'ËÆøÈóÆÁΩëÁ´ô',
        'download': '‰∏ãËΩΩ',
        'downloadLinkNotConfigured': 'dragbit "{name}" ÁöÑ‰∏ãËΩΩÈìæÊé•Â∞öÊú™ÈÖçÁΩÆ„ÄÇ',
        'viewDetails': 'Êü•ÁúãËØ¶ÊÉÖ',
        'comments': 'ËØÑËÆ∫',
        'uploadedBy': 'ÂèëÂ∏ÉËÄÖ',
        'uploader': '‰∏ä‰º†ËÄÖÔºö',
        'anonymousUser': 'ÂåøÂêçÁî®Êà∑',
        'uploadedAt': 'ÂèëÂ∏ÉÊó∂Èó¥',
        'tags': 'Ê†áÁ≠æ',
        'category': 'ÂàÜÁ±ª',
        'description': 'ÊèèËø∞',
        'author': '‰ΩúËÄÖ',
        'noCommentsYet': 'ÊöÇÊó†ËØÑËÆ∫ÔºåÂø´Êù•ÂèëË°®Á¨¨‰∏ÄÊù°ËØÑËÆ∫ÂêßÔºÅ',
        'loginToComment': 'ËØ∑ÁôªÂΩïÂêéËØÑËÆ∫',
        'viewComments': 'Êü•ÁúãËØÑËÆ∫',

        'loginTitle': 'ÁôªÂΩïËµÑÊ∫êÂ∫ì',
        'loginSubtitle': 'Ë¥¶Âè∑ÁôªÂΩïÔºåÁïÖ‰∫´È´òË¥®ÈáèËµÑÊ∫êÂÖçË¥π‰∏ãËΩΩÔºÅ',
        'username': 'Áî®Êà∑Âêç',
        'emailOrUsername': 'ÈÇÆÁÆ±ÊàñÁî®Êà∑Âêç',
        'password': 'ÂØÜÁ†Å',
        'usernamePlaceholder': 'ËæìÂÖ•Áî®Êà∑ÂêçÔºà3-20‰∏™Â≠óÁ¨¶Ôºâ',
        'usernamePlaceholderOptional': 'ËæìÂÖ•Áî®Êà∑ÂêçÔºàÂèØÈÄâÔºå‰∏çÂ°´Âàô‰ΩøÁî®ÈÇÆÁÆ±ÂâçÁºÄÔºâ',
        'loginPlaceholder': 'ËæìÂÖ•ÈÇÆÁÆ±ÊàñÁî®Êà∑Âêç',
        'passwordPlaceholder': 'ËæìÂÖ•ÂØÜÁ†ÅÔºàËá≥Â∞ë6‰∏™Â≠óÁ¨¶Ôºâ',
        'confirmPasswordPlaceholder': 'ÂÜçÊ¨°ËæìÂÖ•ÂØÜÁ†Å',
        'loginButton': 'ÁôªÂΩï',
        'registerButton': 'Ê≥®ÂÜå',
        'demoAccount': 'ÊºîÁ§∫Ë¥¶Âè∑Ôºö',
        'or': 'Êàñ',

        'registerTitle': '‚ú® Ê≥®ÂÜå',
        'registerSubtitle': 'ÂàõÂª∫Ë¥¶Êà∑ÂºÄÂßã‰ΩøÁî®',
        'confirmPassword': 'Á°ÆËÆ§ÂØÜÁ†Å',
        'email': 'ÈÇÆÁÆ±',
        'verificationCode': 'È™åËØÅÁ†Å',
        'sendCode': 'ÂèëÈÄÅÈ™åËØÅÁ†Å',
        'codeSentTo': 'È™åËØÅÁ†ÅÂ∞ÜÂèëÈÄÅÂà∞Ê≠§ÈÇÆÁÆ±',
        'registerSubmit': 'Ê≥®ÂÜå',
        'alreadyHaveAccount': 'Â∑≤ÊúâË¥¶Êà∑Ôºü',
        'loginNow': 'Á´ãÂç≥ÁôªÂΩï',
        'backToHome': '‚Üê ËøîÂõûÈ¶ñÈ°µ',
        'enterCode': 'ËØ∑ËæìÂÖ•È™åËØÅÁ†Å',

        'usernameLengthError': 'Áî®Êà∑ÂêçÈïøÂ∫¶ÂøÖÈ°ªÂú®3-20‰∏™Â≠óÁ¨¶‰πãÈó¥',
        'passwordLengthError': 'ÂØÜÁ†ÅÈïøÂ∫¶Ëá≥Â∞ë6‰∏™Â≠óÁ¨¶',
        'passwordMismatch': '‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥',
        'emailRequired': 'ËØ∑ËæìÂÖ•ÈÇÆÁÆ±Âú∞ÂùÄ',
        'emailInvalid': 'ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈÇÆÁÆ±Âú∞ÂùÄ',
        'codeRequired': 'ËØ∑ËæìÂÖ•È™åËØÅÁ†Å',
        'codeError': 'È™åËØÅÁ†ÅÈîôËØØ',
        'codeExpired': 'È™åËØÅÁ†ÅÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÂèëÈÄÅ',
        'codeNotSent': 'ËØ∑ÂÖàÂèëÈÄÅÈ™åËØÅÁ†Å',
        'codeVerificationFailed': 'È™åËØÅÁ†ÅÈ™åËØÅÂäüËÉΩÊú™ÂàùÂßãÂåñÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï',
        'registerSuccess': 'Ê≥®ÂÜåÊàêÂäüÔºÅÊ≠£Âú®Ë∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢...',
        'registerFailed': 'Ê≥®ÂÜåÂ§±Ë¥•',
        'registerFailedRetry': 'Ê≥®ÂÜåÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï',
        'codeSentSuccess': 'È™åËØÅÁ†ÅÂ∑≤ÂèëÈÄÅÂà∞ÊÇ®ÁöÑÈÇÆÁÆ±ÔºåËØ∑Êü•Êî∂ÔºÅ',
        'codeSendFailed': 'ÈÇÆ‰ª∂ÂèëÈÄÅÂ§±Ë¥•„ÄÇ',
        'codeSendFailedConfig': 'ËØ∑Ê£ÄÊü•Ê®°ÊùøÈÖçÁΩÆÊàñÂèòÈáèÂêçÁß∞ÊòØÂê¶Ê≠£Á°Æ„ÄÇ',
        'codeSendFailedAuth': 'ËÆ§ËØÅÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü• Public Key ÊòØÂê¶Ê≠£Á°Æ„ÄÇ',
        'codeSendFailedError': 'ÈîôËØØ‰ª£Á†ÅÔºö{status}ÔºåËØ¶ÁªÜ‰ø°ÊÅØÔºö{details}',
        'verificationCodeMessage': 'ÊÇ®ÁöÑÈ™åËØÅÁ†ÅÊòØÔºö{code}ÔºåÊúâÊïàÊúü‰∏∫5ÂàÜÈíü„ÄÇ',
        'codeCountdown': '{seconds}ÁßíÂêéÂèØÈáçÊñ∞ÂèëÈÄÅ',

        'myResourcesTitle': 'ÊàëÁöÑËµÑÊ∫ê',
        'myResourcesSubtitle': 'ËøôÈáåÂ±ïÁ§∫‰Ω†Âú®dragbit‰∏ä‰º†ÁöÑÊâÄÊúâËµÑÊ∫ê',
        'noMyResources': '‰Ω†ËøòÊ≤°Êúâ‰∏ä‰º†‰ªª‰ΩïËµÑÊ∫ê',
        'addFirstResource': 'Ê∑ªÂä†Á¨¨‰∏Ä‰∏™ËµÑÊ∫ê',
        'backToMain': 'ËøîÂõû‰∏ªÈ°µ',

        'addResourceTitle': '‚ûï Ê∑ªÂä†ËµÑÊ∫ê',
        'addResourceSubtitle': 'ËµÑÊ∫êÂ∞ÜÊî∂ÂΩïÂú® dragbit ‚Äî‚Äî ‰∏Ä‰∏™‰ºòË¥®ËµÑÊ∫êÁΩëÁ´ô',
        'addNewResource': 'Ê∑ªÂä†Êñ∞ËµÑÊ∫ê',
        'resourceName': 'ËµÑÊ∫êÂêçÁß∞',
        'resourceDescription': 'ËµÑÊ∫êÊèèËø∞',
        'resourceDetails': 'ËØ¶ÁªÜËØ¥Êòé',
        'resourceTags': 'Ê†áÁ≠æÔºàÁî®ÈÄóÂè∑ÂàÜÈöîÔºâ',
        'exampleTags': '‰æãÂ¶ÇÔºöÂÖçË¥π,ÂºÄÊ∫ê,Windows,‰∏≠Êñá',
        'tagsHelp': 'ËæìÂÖ•Â§ö‰∏™Ê†áÁ≠æÔºåÁî®ÈÄóÂè∑ÂàÜÈöîÔºå‰æãÂ¶ÇÔºöÂÖçË¥π,ÂºÄÊ∫ê,Windows',
        'displayImage': 'Â±ïÁ§∫ÂõæÁâáURL',
        'displayVideo': 'Â±ïÁ§∫ËßÜÈ¢ëURL',
        'displayImagePlaceholder': 'ËæìÂÖ•ÂõæÁâáURLÔºàÂèØÈÄâÔºâ',
        'displayVideoPlaceholder': 'ËæìÂÖ•ËßÜÈ¢ëURLÔºàÂèØÈÄâÔºâ',
        'imageHelp': 'ÊîØÊåÅ jpg, png, gif Ê†ºÂºè',
        'videoHelp': 'ÊîØÊåÅ YouTube, Bilibili, ÊàñÂÖ∂‰ªñËßÜÈ¢ëÈìæÊé•',
        'resourceLink': 'ËµÑÊ∫êÈìæÊé•',
        'resourceLinkPlaceholder': 'https://example.com Êàñ file://...',
        'resourceLinkHelp': 'ÁΩëÁ´ôÈìæÊé•ÊàñÊú¨Âú∞Êñá‰ª∂Ë∑ØÂæÑ',
        'categorySelect': 'ÂàÜÁ±ª',
        'iconSelect': 'ÂõæÊ†á',
        'submitResource': 'Êèê‰∫§',
        'backToDragbit': '‚Üê ËøîÂõû dragbit',

        'profileTitle': '‰∏™‰∫∫‰∏≠ÂøÉ',
        'profileSubtitle': 'ÁÆ°ÁêÜ‰Ω†ÁöÑË¥¶Êà∑‰ø°ÊÅØ',
        'member': '‰ºöÂëò',
        'totalResources': 'ÊÄªËµÑÊ∫êÊï∞',
        'totalComments': 'ÊÄªËØÑËÆ∫Êï∞',
        'downloadCount': 'ËµÑÊ∫ê‰∏ãËΩΩÊï∞',
        'accountInfo': 'Ë¥¶Êà∑‰ø°ÊÅØ',
        'registerTime': 'Ê≥®ÂÜåÊó∂Èó¥',
        'accountType': 'Ë¥¶Êà∑Á±ªÂûã',
        'developerAccount': '‚≠ê ÂºÄÂèëËÄÖË¥¶Êà∑',
        'regularUser': 'üë§ ÊôÆÈÄöÁî®Êà∑',
        'developerManagement': 'ÂºÄÂèëËÄÖÁÆ°ÁêÜ',
        'allUsers': 'ÊâÄÊúâÁî®Êà∑',
        'viewAllUsers': 'Êü•ÁúãÊâÄÊúâÁî®Êà∑',
        'exportUsers': 'ÂØºÂá∫Áî®Êà∑Êï∞ÊçÆ',
        'changeAvatar': 'Êõ¥Êç¢Â§¥ÂÉè',
        'accountSettings': 'Ë¥¶Êà∑ËÆæÁΩÆ',
        'changePassword': '‰øÆÊîπÂØÜÁ†Å',
        'currentPassword': 'ÂΩìÂâçÂØÜÁ†Å',
        'newPassword': 'Êñ∞ÂØÜÁ†Å',
        'confirmNewPassword': 'Á°ÆËÆ§Êñ∞ÂØÜÁ†Å',
        'newEmail': 'Êñ∞ÈÇÆÁÆ±',
        'language': 'ËØ≠Ë®Ä',
        'currentPasswordRequired': 'ËØ∑ËæìÂÖ•ÂΩìÂâçÂØÜÁ†Å',
        'currentPasswordError': 'ÂΩìÂâçÂØÜÁ†ÅÈîôËØØ',
        'passwordSameError': 'Êñ∞ÂØÜÁ†Å‰∏çËÉΩ‰∏éÂΩìÂâçÂØÜÁ†ÅÁõ∏Âêå',
        'passwordChangeSuccess': 'ÂØÜÁ†Å‰øÆÊîπÊàêÂäüÔºÅ',
        'emailSameError': 'Êñ∞ÈÇÆÁÆ±‰∏çËÉΩ‰∏éÂΩìÂâçÈÇÆÁÆ±Áõ∏Âêå',
        'emailChangeSuccess': 'ÈÇÆÁÆ±‰øÆÊîπÊàêÂäüÔºÅ',
        'emailNotSet': 'Êú™ËÆæÁΩÆ',
        'userNotFound': 'Áî®Êà∑Êú™ÊâæÂà∞',
        'currentLanguage': 'ÂΩìÂâçËØ≠Ë®Ä',
        'browserLanguage': 'ÊµèËßàÂô®ËØ≠Ë®Ä',
        'selectLanguage': 'ÈÄâÊã©ËØ≠Ë®Ä',
        'theme': '‰∏ªÈ¢òËÆæÁΩÆ',
        'currentTheme': 'ÂΩìÂâç‰∏ªÈ¢òÔºö',
        'selectTheme': 'ÈÄâÊã©‰∏ªÈ¢ò',
        'themeSystem': 'Ë∑üÈöèÁ≥ªÁªü',
        'themeLight': 'ÊµÖËâ≤',
        'themeDark': 'Ê∑±Ëâ≤',

        'copyright': '¬© 2024 dragbit | Made with ‚ù§Ô∏è',
    },
    en: {

        'login': 'Login',
        'logout': 'Logout',
        'register': 'Register',
        'cancel': 'Cancel',
        'submit': 'Submit',
        'save': 'Save',
        'delete': 'Delete',
        'edit': 'Edit',
        'back': 'Back',
        'search': 'Search',
        'filter': 'Filter',
        'reset': 'Reset',
        'confirm': 'Confirm',
        'close': 'Close',
        'loading': 'Loading...',
        'error': 'Error',
        'success': 'Success',

        'siteName': 'dragbit',
        'siteDescription': 'High-quality resources, free download',
        'home': 'Home',
        'myResources': 'My Resources',
        'addResource': 'Add Resource',
        'profile': 'Profile',
        'personalCenter': 'Personal Center',
        'loginRequired': 'Login Required',
        'loginRequiredMessage': 'You need to login to view resources\nPlease login or register',

        'resources': 'Resources',
        'allCategories': 'All',
        'filterAll': 'All',
        'filterSoftware': 'Software',
        'filterDocument': 'Document',
        'filterMedia': 'Media',
        'filterWebsite': 'Website',
        'filterOther': 'Other',
        'software': 'Software',
        'document': 'Document',
        'media': 'Media',
        'website': 'Website',
        'other': 'Other',
        'searchPlaceholder': 'Search resources...',
        'addResourceButton': '+ Add Resource',
        'visitWebsite': 'Visit Website',
        'download': 'Download',
        'downloadLinkNotConfigured': 'The download link for dragbit "{name}" is not configured yet.',
        'viewDetails': 'View Details',
        'comments': 'Comments',
        'uploadedBy': 'Uploaded By',
        'uploader': 'Uploader: ',
        'anonymousUser': 'Anonymous User',
        'uploadedAt': 'Uploaded At',
        'tags': 'Tags',
        'category': 'Category',
        'description': 'Description',
        'author': 'Author',
        'noCommentsYet': 'No comments yet. Be the first to comment!',
        'loginToComment': 'Please login to comment',
        'viewComments': 'View Comments',

        'loginTitle': 'Login',
        'loginSubtitle': 'Account login to enjoy high-quality free resources!',
        'username': 'Username',
        'emailOrUsername': 'Email or Username',
        'password': 'Password',
        'usernamePlaceholder': 'Enter username (3-20 characters)',
        'usernamePlaceholderOptional': 'Enter username (optional, email prefix will be used if empty)',
        'loginPlaceholder': 'Enter email or username',
        'passwordPlaceholder': 'Enter password (at least 6 characters)',
        'confirmPasswordPlaceholder': 'Enter password again',
        'loginButton': 'Login',
        'registerButton': 'Register',
        'demoAccount': 'Demo Account:',
        'or': 'or',

        'registerTitle': '‚ú® Register',
        'registerSubtitle': 'Create an account to get started',
        'confirmPassword': 'Confirm Password',
        'email': 'Email',
        'verificationCode': 'Verification Code',
        'sendCode': 'Send Code',
        'codeSentTo': 'Verification code will be sent to this email',
        'registerSubmit': 'Register',
        'alreadyHaveAccount': 'Already have an account?',
        'loginNow': 'Login Now',
        'backToHome': '‚Üê Back to Home',
        'enterCode': 'Enter verification code',

        'usernameLengthError': 'Username must be between 3-20 characters',
        'passwordLengthError': 'Password must be at least 6 characters',
        'passwordMismatch': 'Passwords do not match',
        'emailRequired': 'Please enter your email address',
        'emailInvalid': 'Please enter a valid email address',
        'codeRequired': 'Please enter verification code',
        'codeError': 'Verification code is incorrect',
        'codeExpired': 'Verification code has expired, please resend',
        'codeNotSent': 'Please send verification code first',
        'codeVerificationFailed': 'Verification code feature not initialized, please refresh the page',
        'registerSuccess': 'Registration successful! Redirecting to login page...',
        'registerFailed': 'Registration failed',
        'registerFailedRetry': 'Registration failed, please try again later',
        'codeSentSuccess': 'Verification code has been sent to your email, please check!',
        'codeSendFailed': 'Failed to send email.',
        'codeSendFailedConfig': 'Please check if template configuration or variable names are correct.',
        'codeSendFailedAuth': 'Authentication failed, please check if Public Key is correct.',
        'codeSendFailedError': 'Error code: {status}, Details: {details}',
        'verificationCodeMessage': 'Your verification code is: {code}, valid for 5 minutes.',
        'codeCountdown': '{seconds} seconds before resending',

        'myResourcesTitle': 'My Resources',
        'myResourcesSubtitle': 'All resources you uploaded on dragbit',
        'noMyResources': 'You have not uploaded any resources yet',
        'addFirstResource': 'Add Your First Resource',
        'backToMain': 'Back to Home',

        'addResourceTitle': '‚ûï Add Resource',
        'addResourceSubtitle': 'Resources will be added to dragbit - a quality resource website',
        'addNewResource': 'Add New Resource',
        'resourceName': 'Resource Name',
        'resourceDescription': 'Resource Description',
        'resourceDetails': 'Details',
        'resourceTags': 'Tags (comma separated)',
        'exampleTags': 'Example: Free,Open Source,Windows,Chinese',
        'tagsHelp': 'Enter multiple tags separated by commas, e.g.: Free,Open Source,Windows',
        'displayImage': 'Display Image URL',
        'displayVideo': 'Display Video URL',
        'displayImagePlaceholder': 'Enter image URL (optional)',
        'displayVideoPlaceholder': 'Enter video URL (optional)',
        'imageHelp': 'Supports jpg, png, gif formats',
        'videoHelp': 'Supports YouTube, Bilibili, or other video links',
        'resourceLink': 'Resource Link',
        'resourceLinkPlaceholder': 'https://example.com or file://...',
        'resourceLinkHelp': 'Website link or local file path',
        'categorySelect': 'Category',
        'iconSelect': 'Icon',
        'submitResource': 'Submit',
        'backToDragbit': '‚Üê Back to dragbit',

        'profileTitle': 'Profile',
        'profileSubtitle': 'Manage your account information',
        'member': 'Member',
        'totalResources': 'Total Resources',
        'totalComments': 'Total Comments',
        'downloadCount': 'Download Count',
        'accountInfo': 'Account Information',
        'registerTime': 'Register Time',
        'accountType': 'Account Type',
        'developerAccount': '‚≠ê Developer Account',
        'regularUser': 'üë§ Regular User',
        'developerManagement': 'Developer Management',
        'allUsers': 'All Users',
        'viewAllUsers': 'View All Users',
        'exportUsers': 'Export Users Data',
        'changeAvatar': 'Change Avatar',
        'accountSettings': 'Account Settings',
        'changePassword': 'Change Password',
        'currentPassword': 'Current Password',
        'newPassword': 'New Password',
        'confirmNewPassword': 'Confirm New Password',
        'newEmail': 'New Email',
        'language': 'Language',
        'currentPasswordRequired': 'Please enter current password',
        'currentPasswordError': 'Current password is incorrect',
        'passwordSameError': 'New password cannot be the same as current password',
        'passwordChangeSuccess': 'Password changed successfully!',
        'emailSameError': 'New email cannot be the same as current email',
        'emailChangeSuccess': 'Email changed successfully!',
        'emailNotSet': 'Not set',
        'userNotFound': 'User not found',
        'currentLanguage': 'Current Language',
        'browserLanguage': 'Browser Language',
        'selectLanguage': 'Select Language',
        'theme': 'Theme Settings',
        'currentTheme': 'Current Theme:',
        'selectTheme': 'Select Theme',
        'themeSystem': 'Follow System',
        'themeLight': 'Light',
        'themeDark': 'Dark',

        'copyright': '¬© 2024 dragbit | Made with ‚ù§Ô∏è',
    }
};

(function() {
    'use strict';


    function detectBrowserLanguage() {
        try {
            let browserLang = navigator.language || navigator.userLanguage;
            
            if (!browserLang && navigator.languages && navigator.languages.length > 0) {
                browserLang = navigator.languages[0];
            }
            
            if (!browserLang) {
                return 'zh';
            }
            
            const browserLangLower = browserLang.toLowerCase();
            const supportedLangs = ['zh', 'en'];
            const langCode = browserLangLower.split('-')[0];
            
            if (supportedLangs.includes(langCode)) {
                return langCode;
            }
        } catch (e) {
        }

        return 'zh';
    }

    function getBrowserLanguage() {
        try {
            let browserLang = navigator.language || navigator.userLanguage;
            
            if (!browserLang && navigator.languages && navigator.languages.length > 0) {
                browserLang = navigator.languages[0];
            }
            
            if (!browserLang) {
                browserLang = 'zh-CN';
            }
            
            return browserLang;
        } catch (e) {
            return 'zh-CN';
        }
    }

    let currentLang = 'zh';
    let browserDetectedLang = detectBrowserLanguage();
    
    try {
        const savedLang = localStorage.getItem('language');
        if (savedLang && translations[savedLang]) {

            currentLang = savedLang;
        } else {

            currentLang = browserDetectedLang;

            try {
                localStorage.setItem('language', currentLang);
            } catch (e) {

            }
        }

        if (!translations[currentLang]) {
            currentLang = 'zh';
        }
    } catch (e) {
        currentLang = 'zh';
    }

    window.getBrowserLanguage = getBrowserLanguage;
    window.detectBrowserLanguage = detectBrowserLanguage;

    const i18n = {
        currentLang: currentLang,
        
        setLanguage: function(lang) {
            if (translations[lang]) {
                const oldLang = this.currentLang;
                this.currentLang = lang;
                
                try {
                    localStorage.setItem('language', lang);
                } catch (e) {
                }
                
                this.updatePage();
                
                setTimeout(() => {
                    this.updatePage();
                }, 150);
                
                setTimeout(() => {
                    this.updatePage();
                    
                    try {
                        const event = new CustomEvent('languageChanged', { 
                            detail: { lang: lang, oldLang: oldLang } 
                        });
                        window.dispatchEvent(event);
                    } catch (e) {
                    }
                }, 300);
                
                setTimeout(() => {
                    this.updatePage();
                }, 600);
            }
        },
        
        t: function(key) {
            return translations[this.currentLang] && translations[this.currentLang][key] 
                || translations['zh'][key] 
                || key;
        },
        
        updatePage: function() {
            console.log('updatePage ÂºÄÂßãÊâßË°åÔºåÂΩìÂâçËØ≠Ë®Ä:', this.currentLang);
            let updatedCount = 0;
            
            document.querySelectorAll('[data-i18n]').forEach(function(el) {
                const key = el.getAttribute('data-i18n');
                if (key) {
                    const translated = i18n.t(key);
                    updatedCount++;

                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        const placeholderKey = el.getAttribute('data-i18n-placeholder') || el.getAttribute('data-i18n');
                        if (placeholderKey) {
                            el.placeholder = i18n.t(placeholderKey);
                        }
                        if (el.value === '' || el.getAttribute('data-i18n-value')) {
                            const valueKey = el.getAttribute('data-i18n-value');
                            if (valueKey) {
                                el.value = i18n.t(valueKey);
                            }
                        }
                    } else {
                        const hasIcon = el.querySelector('i, svg, img') !== null;
                        const hasSpanWithI18n = el.querySelector('span[data-i18n]');
                        
                        if (hasSpanWithI18n) {
                            hasSpanWithI18n.textContent = translated;
                        } else if (hasIcon) {
                            let textUpdated = false;
                            const allChildren = Array.from(el.childNodes);
                            
                            allChildren.forEach(function(node, index) {
                                if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
                                    const nodesBefore = Array.from(el.childNodes).slice(0, index);
                                    const hasIconBefore = nodesBefore.some(n => 
                                        n.nodeType === Node.ELEMENT_NODE && 
                                        (n.tagName === 'I' || n.tagName === 'SVG' || n.tagName === 'IMG')
                                    );
                                    if (hasIconBefore) {
                                        node.textContent = ' ' + translated;
                                    } else {
                                        node.textContent = translated;
                                    }
                                    textUpdated = true;
                                } else if (node.nodeType === Node.ELEMENT_NODE && node.tagName === 'SPAN' && !node.hasAttribute('data-i18n')) {
                                    if (!node.querySelector('i, svg, img')) {
                                        node.textContent = translated;
                                        textUpdated = true;
                                    }
                                }
                            });

                            if (!textUpdated) {
                                const firstIcon = el.querySelector('i, svg, img');
                                if (firstIcon) {
                                    const nextSibling = firstIcon.nextSibling;
                                    if (nextSibling && nextSibling.nodeType === Node.TEXT_NODE) {
                                        nextSibling.textContent = ' ' + translated;
                                        textUpdated = true;
                                    } else {
                                        const existingTextNodes = Array.from(el.childNodes).filter(n => 
                                            n.nodeType === Node.TEXT_NODE && n.textContent.trim()
                                        );
                                        if (existingTextNodes.length > 0) {
                                            existingTextNodes.forEach(n => {
                                                n.textContent = ' ' + translated;
                                                textUpdated = true;
                                            });
                                        }
                                        if (!textUpdated) {
                                            firstIcon.insertAdjacentText('afterend', ' ' + translated);
                                        }
                                    }
                                } else {
                                    el.textContent = translated;
                                }
                            }
                        } else {
                            el.textContent = translated;
                        }
                    }
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(function(el) {
                const key = el.getAttribute('data-i18n-placeholder');
                if (key && (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA')) {
                    el.placeholder = i18n.t(key);
                    updatedCount++;
                }
            });

            document.querySelectorAll('[data-i18n-title]').forEach(function(el) {
                const key = el.getAttribute('data-i18n-title');
                if (key) {
                    el.title = i18n.t(key);
                    updatedCount++;
                }
            });

            document.querySelectorAll('[data-i18n-option]').forEach(function(el) {
                const key = el.getAttribute('data-i18n-option');
                if (key && el.tagName === 'OPTION') {
                    el.textContent = i18n.t(key);
                    updatedCount++;
                }
            });

            if (document.documentElement) {
                document.documentElement.lang = this.currentLang === 'zh' ? 'zh-CN' : 'en';
            }

            try {
                const event = new CustomEvent('languageChanged', { 
                    detail: { lang: this.currentLang } 
                });
                window.dispatchEvent(event);
            } catch (e) {
            }
        },
        
        init: function() {
            this.updatePage();
        }
    };

    window.i18n = i18n;
    window.translations = translations;
    
    console.log('‚úì i18n Â∑≤Âä†ËΩΩÔºåÂΩìÂâçËØ≠Ë®Ä:', currentLang);
})();