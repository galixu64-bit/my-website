# 📚 用户数据管理说明

## 📋 概述

网站现在使用独立的 `users.json` 文件来管理账号数据。这个文件包含所有用户的基本信息。

## 📁 文件结构

### `users.json`
- **位置**：项目根目录
- **格式**：JSON 数组
- **用途**：存储初始用户数据（如演示账号）

**示例格式：**
```json
[
  {
    "id": 1,
    "username": "demo",
    "password": "123456",
    "email": "demo@example.com",
    "createdAt": "2024-01-01T00:00:00.000Z",
    "isDeveloper": true
  }
]
```

## 🔄 数据同步机制

### 工作流程

1. **页面加载时**：
   - 从 `users.json` 文件加载初始用户数据
   - 从 `localStorage` 加载已注册的新用户
   - 合并两份数据（localStorage 中的优先）

2. **新用户注册**：
   - 新注册的用户保存到 `localStorage`（因为前端无法直接写入文件）
   - 下次加载时会自动合并

3. **数据优先级**：
   - `localStorage` 中的数据优先（包含新注册的用户）
   - `users.json` 中的用户作为补充

## 🛠️ 管理用户数据

### 方法 1：直接编辑 `users.json` 文件

1. 打开 `users.json` 文件
2. 添加、修改或删除用户
3. 推送到 GitHub：
   ```bash
   git add users.json
   git commit -m "更新用户数据"
   git push origin main
   ```

### 方法 2：导出当前所有用户数据

在浏览器控制台执行：
```javascript
exportUsersToJSON()
```

这会下载一个包含所有用户数据的 JSON 文件，包括：
- `users.json` 中的初始用户
- `localStorage` 中新注册的用户

### 方法 3：查看所有用户（控制台）

```javascript
// 查看所有用户
const users = getAllUsersSync();
console.log(users);

// 查找特定用户
const user = getUserByUsernameSync('demo');
console.log(user);
```

## ⚠️ 注意事项

### 1. 密码安全
- ⚠️ **当前密码以明文存储**（仅用于演示）
- 生产环境应该使用密码哈希（如 bcrypt）
- 不要将包含真实密码的 `users.json` 提交到公开仓库

### 2. 数据同步
- `users.json` 是静态文件，部署后不会自动更新
- 新注册的用户只保存在用户的浏览器 `localStorage` 中
- 如果需要跨设备同步，需要后端服务器支持

### 3. 用户数据备份
- 定期使用 `exportUsersToJSON()` 导出备份
- 可以将导出的 JSON 文件替换 `users.json` 来更新初始数据

## 🔐 添加管理员账号

在 `users.json` 中添加用户，设置 `isDeveloper: true`：

```json
{
  "id": 2,
  "username": "admin",
  "password": "your-secure-password",
  "email": "admin@example.com",
  "createdAt": "2024-01-01T00:00:00.000Z",
  "isDeveloper": true
}
```

## 📊 数据结构

每个用户对象包含以下字段：

| 字段 | 类型 | 说明 |
|------|------|------|
| `id` | number | 用户唯一 ID（时间戳） |
| `username` | string | 用户名（3-20 字符） |
| `password` | string | 密码（至少 6 字符） |
| `email` | string | 邮箱地址 |
| `createdAt` | string | 创建时间（ISO 格式） |
| `isDeveloper` | boolean | 是否为开发者/管理员 |

## 🚀 迁移现有数据

如果你的网站已经有用户数据在 `localStorage` 中：

1. **导出现有数据**：
   ```javascript
   exportUsersToJSON()
   ```

2. **合并到 `users.json`**：
   - 下载导出的 JSON 文件
   - 将数据合并到 `users.json`
   - 确保没有重复的用户名

3. **重新部署**：
   - 推送更新后的 `users.json` 到 GitHub

## 💡 最佳实践

1. **初始账号**：放在 `users.json` 中，供所有用户使用
2. **用户注册**：由用户自行注册，保存在各自的浏览器中
3. **定期备份**：使用导出功能定期备份用户数据
4. **生产环境**：考虑使用后端数据库（如 Firebase、Supabase）

## 🆘 常见问题

### Q: 如何重置所有用户数据？
A: 删除 `localStorage` 中的 `userDatabase` 键，然后刷新页面。

### Q: 新注册的用户在哪里？
A: 保存在用户的浏览器 `localStorage` 中，不会自动同步到 `users.json`。

### Q: 如何将新用户添加到初始数据？
A: 导出所有数据，合并到 `users.json`，然后重新部署。

### Q: 密码可以加密吗？
A: 可以，需要在前端添加密码哈希库（如 bcryptjs），但前端加密不是最佳实践，应该使用后端服务。

---

**提示**：这是一个前端演示系统。生产环境建议使用后端数据库来管理用户数据。

